var windowHeight=window.innerHeight,windowWidth=window.innerWidth,terminalWindow=document.querySelector(".window");terminalWindow.style.top=windowHeight/2-terminalWindow.offsetHeight/2+"px",terminalWindow.style.left=windowWidth/2-terminalWindow.offsetWidth/2+"px",document.addEventListener("DOMContentLoaded",function(){var e=(new Date).toString();e=e.substr(0,e.indexOf("GMT")-1),$(".date").append("Last login: "+e+" on ttys000\n"),$(".close").on("click",function(){alert("Please no, dont do that :(")}),$(".minimize").on("click",function(){alert("Im sorry, you can't minimize this awesomeness ;)")}),$(".maximize").on("click",function(){"100%"!=terminalWindow.style.width?(console.log("its not 100%"),$(terminalWindow).css({left:"50%",top:"50%",transform:"translateY(-50%) translateX(-50%)",height:"100%",width:"100%"}),terminalWindow.setAttribute("data-x","0"),terminalWindow.setAttribute("data-y","0")):(console.log("its 100%"),$(".window").css({height:"80%",width:"80%",left:"0px",top:"0px",transform:"none"}))});var t=function(){"use strict";function e(e){var t=document.createElement("li");return t.innerHTML=e,t}function t(){var e=!1,t=c.split(" "),n=t[0];t.shift();for(var a=0;a<h.length;a++)if(n===h[a].name){h[a].function(t),e=!0;break}e||r.append("user: command not found: "+c+"\n"),d.push(c),p=d.length,c=""}function n(){r.append('<span class="prompt">'+s+"</span> "),r.append('<span class="path">'+l+"</span> ")}function a(e){c=c.slice(0,-e),r.html(r.html().slice(0,-e))}function i(){c.length>0&&a(c.length)}function o(e){r.append(e),c+=e}var r=$(".terminal"),s="jakes-portfolio:",l="~",d=[],p=0,c="",h=[{name:"help",function:function(){var t=document.createElement("ul");t.class="help-list",t.appendChild(e("clear")),t.appendChild(e("about-me")),t.appendChild(e("my-work")),t.appendChild(e("contact")),t.appendChild(e("credit")),r.append(t)}},{name:"clear",function:function(){r.text("")}},{name:"about-me",function:function(){r.append('My name is Jake Schroeder; I am 18 and I am currently studying Design and Technology at <a target="_blank" href="https://www.newschool.edu/parsons/">Parsons school of design</a>. I live in Manhattan NY and I plan on staying here a while. I enjoy every aspect of digital product creation. From design to development to production, I love the process. When people ask me what I do, I tell them that I deal in ideas but more specifically ideas that push the boundaries of innovation. Most of these ideas, I discard but the ones that involve utilizing technology, I pursue. I hope to have a future in front-end software development and one day build something of my own. Thank you for visiting :)\n')}},{name:"my-work",function:function(){var t=document.createElement("ul");t.class="work-list",t.appendChild(e('<a href="http://incline.azurewebsites.net/" target="_blank">Incline Fitness</a>')),t.appendChild(e('<a href="https://drive.google.com/file/d/0BxfG2U55qf7XMXBfRFpiQlRweUk/view?usp=sharing" target="_blank">Incline Fitness Branding Guide</a>')),t.appendChild(e('<a href="http://heliosinsights.com/" target="_blank">Helios IPM</a>')),t.appendChild(e('<a href="https://www.ipdocketingrules.com/index.php?title=Main_Page" target="_blank">IP Docketing Rules</a>')),r.append(t)}},{name:"contact-me",function:function(){}},{name:"credit",function:function(){var t=document.createElement("ul");t.class="credit-list",t.appendChild(e('<a href="https://codepen.io/marcbizal/pen/VLKoam?q=terminal&limit=all&type=type-pens" target="_blank">Terminal Functionality by: Marcus Bizal</a>')),t.appendChild(e('<a href="http://interactjs.io/" target="_blank">Window Drag & Resize Behavior from: Interact.js</a>')),t.appendChild(e('<a href="http://www.mattboldt.com/demos/typed-js/" target="_blank">Typing effect from: Typed.js</a>')),r.append(t)}}];$(document).keydown(function(e){var t="number"==typeof(e=e||window.event).which?e.which:e.keyCode;if(8===t&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(e.preventDefault(),""!==c&&a(1)),38===t||40===t){38===t?--p<0&&p++:40===t&&++p>d.length-1&&p--;var n=d[p];void 0!==n&&(i(),o(n))}}),$(document).keypress(function(e){var a="number"==typeof(e=e||window.event).which?e.which:e.keyCode;switch(a){case 13:r.append("\n"),t(),n();break;default:o(String.fromCharCode(a))}}),n()};interact(".window").draggable({onmove:function(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+n+"px, "+a+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",a)},allowFrom:".heading"}).resizable({edges:{right:!0,bottom:!0,left:!0,top:!0},margin:10}).on("resizemove",function(e){var t=e.target,n=parseFloat(t.getAttribute("data-x"))||0,a=parseFloat(t.getAttribute("data-y"))||0;t.style.width=e.rect.width+"px",t.style.height=e.rect.height+"px",document.querySelector(".title").textContent="1. jake-schroeder-portfolio: ~ (user) "+Math.round(e.rect.width)+"Ã—"+Math.round(e.rect.height),n+=e.deltaRect.left,a+=e.deltaRect.top,t.style.webkitTransform=t.style.transform="translate("+n+"px,"+a+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",a)});setTimeout(function(){new Typed(".element0-text",{strings:[" Hi there, my name is Jake"],typeSpeed:30,backSpeed:0,loop:!1,showCursor:!1,onComplete:function(){}})},0),setTimeout(function(){$(".element1").css("display","inherit");new Typed(".element1-text",{strings:[" This is my portfolio website, I hope you enjoy :)"],typeSpeed:30,backSpeed:0,loop:!1,showCursor:!1,onComplete:function(){}})},3e3),setTimeout(function(){$(".element2").css("display","inherit");new Typed(".element2-text",{strings:[' Please type "Help" to see a list of commands^3000'],typeSpeed:30,backSpeed:0,loop:!1,showCursor:!1,onComplete:function(){t(),$(".terminal").addClass("terminal-after")}})},7e3)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93SGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJ3aW5kb3dXaWR0aCIsImlubmVyV2lkdGgiLCJ0ZXJtaW5hbFdpbmRvdyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwidG9wIiwib2Zmc2V0SGVpZ2h0IiwibGVmdCIsIm9mZnNldFdpZHRoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhdGUiLCJEYXRlIiwidG9TdHJpbmciLCJzdWJzdHIiLCJpbmRleE9mIiwiJCIsImFwcGVuZCIsIm9uIiwiYWxlcnQiLCJ3aWR0aCIsImNvbnNvbGUiLCJsb2ciLCJjc3MiLCJ0cmFuc2Zvcm0iLCJoZWlnaHQiLCJzZXRBdHRyaWJ1dGUiLCJiZWdpblRlcm1pbmFsIiwiY3JlYXRlTGkiLCJ0ZXh0IiwibmV3TGkiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwicHJvY2Vzc0NvbW1hbmQiLCJpc1ZhbGlkIiwiYXJncyIsImNvbW1hbmQiLCJzcGxpdCIsImNtZCIsInNoaWZ0IiwiaSIsImNvbW1hbmRzIiwibGVuZ3RoIiwibmFtZSIsImZ1bmN0aW9uIiwidGVybWluYWwiLCJjb21tYW5kSGlzdG9yeSIsInB1c2giLCJoaXN0b3J5SW5kZXgiLCJkaXNwbGF5UHJvbXB0IiwicHJvbXB0IiwicGF0aCIsImVyYXNlIiwibiIsInNsaWNlIiwiaHRtbCIsImNsZWFyQ29tbWFuZCIsImFwcGVuZENvbW1hbmQiLCJzdHIiLCJ1bCIsImNsYXNzIiwiYXBwZW5kQ2hpbGQiLCJrZXlkb3duIiwiZSIsImtleUNvZGUiLCJldmVudCIsIndoaWNoIiwidGFyZ2V0IiwidGFnTmFtZSIsInByZXZlbnREZWZhdWx0IiwidW5kZWZpbmVkIiwia2V5cHJlc3MiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJpbnRlcmFjdCIsImRyYWdnYWJsZSIsIm9ubW92ZSIsIngiLCJwYXJzZUZsb2F0IiwiZ2V0QXR0cmlidXRlIiwiZHgiLCJ5IiwiZHkiLCJ3ZWJraXRUcmFuc2Zvcm0iLCJhbGxvd0Zyb20iLCJyZXNpemFibGUiLCJlZGdlcyIsInJpZ2h0IiwiYm90dG9tIiwibWFyZ2luIiwicmVjdCIsInRleHRDb250ZW50IiwiTWF0aCIsInJvdW5kIiwiZGVsdGFSZWN0Iiwic2V0VGltZW91dCIsIlR5cGVkIiwic3RyaW5ncyIsInR5cGVTcGVlZCIsImJhY2tTcGVlZCIsImxvb3AiLCJzaG93Q3Vyc29yIiwib25Db21wbGV0ZSIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxhQUFBQyxPQUFBQyxZQUNBQyxZQUFBRixPQUFBRyxXQUVBQyxlQUFBQyxTQUFBQyxjQUFBLFdBSUFGLGVBQUFHLE1BQUFDLElBQUFULGFBQUEsRUFBQUssZUFBQUssYUFBQSxFQUFBLEtBQ0FMLGVBQUFHLE1BQUFHLEtBQUFSLFlBQUEsRUFBQUUsZUFBQU8sWUFBQSxFQUFBLEtBR0FOLFNBQUFPLGlCQUFBLG1CQUFBLFdBR0EsSUFBQUMsR0FBQSxJQUFBQyxNQUFBQyxXQUFBRixFQUFBQSxFQUFBRyxPQUFBLEVBQUFILEVBQUFJLFFBQUEsT0FBQSxHQUdBQyxFQUFBLFNBQUFDLE9BQUEsZUFBQU4sRUFBQSxpQkFFQUssRUFBQSxVQUFBRSxHQUFBLFFBQUEsV0FDQUMsTUFBQSxnQ0FHQUgsRUFBQSxhQUFBRSxHQUFBLFFBQUEsV0FDQUMsTUFBQSxzREFHQUgsRUFBQSxhQUFBRSxHQUFBLFFBQUEsV0FDQSxRQUFBaEIsZUFBQUcsTUFBQWUsT0FDQUMsUUFBQUMsSUFBQSxnQkFDQU4sRUFBQWQsZ0JBQUFxQixLQUNBZixLQUFBLE1BQ0FGLElBQUEsTUFDQWtCLFVBQUEsb0NBQ0FDLE9BQUEsT0FDQUwsTUFBQSxTQUVBbEIsZUFBQXdCLGFBQUEsU0FBQSxLQUNBeEIsZUFBQXdCLGFBQUEsU0FBQSxPQUlBTCxRQUFBQyxJQUFBLFlBQ0FOLEVBQUEsV0FBQU8sS0FDQUUsT0FBQSxNQUNBTCxNQUFBLE1BQ0FaLEtBQUEsTUFDQUYsSUFBQSxNQUNBa0Is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RUE2RCxFQUFBOUQsTUFBQThFLGdCQUFBaEIsRUFBQTlELE1BQUFtQixVQUNBLGFBQUFxRCxFQUFBLE1BQUFJLEVBQUEsTUFFQWQsRUFBQXpDLGFBQUEsU0FBQW1ELEdBQ0FWLEVBQUF6QyxhQUFBLFNBQUF1RCxLQXlDQWMsV0FBQSxXQUNBLElBQUFDLE1BQUEsa0JBQ0FDLFNBQUEsOEJBQ0FDLFVBQUEsR0FDQUMsVUFBQSxFQUNBQyxNQUFBLEVBQ0FDLFlBQUEsRUFDQUMsV0FBQSxnQkFLQSxHQUNBUCxXQUFBLFdBQ0EvRSxFQUFBLGFBQUFPLElBQUEsVUFBQSxXQUNBLElBQUF5RSxNQUFBLGtCQUNBQyxTQUFBLHNEQUNBQyxVQUFBLEdBQ0FDLFVBQUEsRUFDQUMsTUFBQSxFQUNBQyxZQUFBLEVBQ0FDLFdBQUEsZ0JBS0EsS0FDQVAsV0FBQSxXQUNBL0UsRUFBQSxhQUFBTyxJQUFBLFVBQUEsV0FDQSxJQUFBeUUsTUFBQSxrQkFDQUMsU0FBQSxzREFDQUMsVUFBQSxHQUNBQyxVQUFBLEVBQ0FDLE1BQUEsRUFDQUMsWUFBQSxFQUNBQyxXQUFBLFdBRUEzRSxJQUNBWCxFQUFBLGFBQUF1RixTQUFBLHNCQUdBIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xudmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cbnZhciB0ZXJtaW5hbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5kb3cnKTtcbi8vIHRlcm1pbmFsV2luZG93LnN0eWxlLmxlZnQgPSAod2luZG93V2lkdGggLyAyKSAtIHRlcm1pbmFsV2luZG93Lm9mZnNldFdpZHRoIC8gMisgJ3B4Jztcbi8vXG4vLyB0ZXJtaW5hbFdpbmRvdy5zdHlsZS50b3AgPSAod2luZG93SGVpZ2h0IC8gMikgLSB0ZXJtaW5hbFdpbmRvdy5vZmZzZXRIZWlnaHQgLyAyICsgJ3B4JztcbnRlcm1pbmFsV2luZG93LnN0eWxlLnRvcCA9ICh3aW5kb3dIZWlnaHQvMikgLSB0ZXJtaW5hbFdpbmRvdy5vZmZzZXRIZWlnaHQgLyAyICsgJ3B4JztcbnRlcm1pbmFsV2luZG93LnN0eWxlLmxlZnQgPSAod2luZG93V2lkdGgvMikgLSB0ZXJtaW5hbFdpbmRvdy5vZmZzZXRXaWR0aCAvIDIgKyAncHgnO1xuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBHZXQgdGhlIGRhdGUgZm9yIG91ciBmYWtlIGxhc3QtbG9naW5cbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCkudG9TdHJpbmcoKTsgZGF0ZSA9IGRhdGUuc3Vic3RyKDAsIGRhdGUuaW5kZXhPZihcIkdNVFwiKSAtIDEpO1xuXG4gICAgLy8gRGlzcGxheSBsYXN0LWxvZ2luIGFuZCBwcm9tdFxuICAgICQoJy5kYXRlJykuYXBwZW5kKFwiTGFzdCBsb2dpbjogXCIgKyBkYXRlICsgXCIgb24gdHR5czAwMFxcblwiKTtcblxuICAgICQoJy5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICBhbGVydCgnUGxlYXNlIG5vLCBkb250IGRvIHRoYXQgOignKTtcbiAgICB9KTtcblxuICAgICQoJy5taW5pbWl6ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICBhbGVydCgnSW0gc29ycnksIHlvdSBjYW5cXCd0IG1pbmltaXplIHRoaXMgYXdlc29tZW5lc3MgO1xcKScpO1xuICAgIH0pO1xuXG4gICAgJCgnLm1heGltaXplJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGVybWluYWxXaW5kb3cuc3R5bGUud2lkdGggIT0gJzEwMCUnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaXRzIG5vdCAxMDAlJyk7XG4gICAgICAgICAgICAkKHRlcm1pbmFsV2luZG93KS5jc3Moe1xuICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxuICAgICAgICAgICAgICAgIHRvcDogJzUwJScsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKSB0cmFuc2xhdGVYKC01MCUpJyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRlcm1pbmFsV2luZG93LnNldEF0dHJpYnV0ZSgnZGF0YS14JywgJzAnKTtcbiAgICAgICAgICAgIHRlcm1pbmFsV2luZG93LnNldEF0dHJpYnV0ZSgnZGF0YS15JywgJzAnKTtcblxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaXRzIDEwMCUnKTtcbiAgICAgICAgICAgICQoJy53aW5kb3cnKS5jc3Moe1xuICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnODAlJyxcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiAnODAlJyxcbiAgICAgICAgICAgICAgICBsZWZ0OiAnMHB4JyxcbiAgICAgICAgICAgICAgICB0b3A6ICcwcHgnLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ25vbmUnXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cblxuICAgIH0pO1xuXG5cblxuICAgIHZhciBiZWdpblRlcm1pbmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKlxuICAgLy9cdE1hZGUgd2l0aCA8MyBieSBNYXJjdXMgQml6YWxcbiAgIC8vXHRnaXRodWIuY29tL21hcmNiaXphbFxuICAgLy9cdGxpbmtlZGluLmNvbS9pbi9tYXJjYml6YWxcbiAgICovXG5cbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgLy8gVVRJTElUWVxuICAgICAgICBmdW5jdGlvbiBnZXRSYW5kb21JbnQobWluLCBtYXgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVMaSh0ZXh0KSB7XG4gICAgICAgICAgICB2YXIgbmV3TGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbmV3TGkuaW5uZXJIVE1MID0gdGV4dDtcbiAgICAgICAgICAgIHJldHVybiBuZXdMaTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFTkQgVVRJTElUWVxuXG4gICAgICAgIC8vIENPTU1BTkRTXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICAgICAgdGVybWluYWwudGV4dChcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhlbHAoKSB7XG4gICAgICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgdWwuY2xhc3MgPSAnaGVscC1saXN0JztcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZUxpKCdjbGVhcicpKTtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZUxpKCdhYm91dC1tZScpKTtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZUxpKCdteS13b3JrJykpO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlTGkoJ2NvbnRhY3QnKSk7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVMaSgnY3JlZGl0JykpO1xuICAgICAgICAgICAgLy8gdGVybWluYWwuYXBwZW5kKCdcXG4nKTtcbiAgICAgICAgICAgIHRlcm1pbmFsLmFwcGVuZCh1bCk7XG4gICAgICAgICAgICAvLyB0ZXJtaW5hbC5hcHBlbmQoJ1xcbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWJvdXQoKSB7XG4gICAgICAgICAgICB0ZXJtaW5hbC5hcHBlbmQoJ015IG5hbWUgaXMgSmFrZSBTY2hyb2VkZXI7IEkgYW0gMTggYW5kIEkgYW0gY3VycmVudGx5IHN0dWR5aW5nIERlc2lnbiBhbmQgVGVjaG5vbG9neSBhdCA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly93d3cubmV3c2Nob29sLmVkdS9wYXJzb25zL1wiPlBhcnNvbnMgc2Nob29sIG9mIGRlc2lnbjwvYT4uIEkgbGl2ZSBpbiBNYW5oYXR0YW4gTlkgYW5kIEkgcGxhbiBvbiBzdGF5aW5nIGhlcmUgYSB3aGlsZS4gSSBlbmpveSBldmVyeSBhc3BlY3Qgb2YgZGlnaXRhbCBwcm9kdWN0IGNyZWF0aW9uLiBGcm9tIGRlc2lnbiB0byBkZXZlbG9wbWVudCB0byBwcm9kdWN0aW9uLCBJIGxvdmUgdGhlIHByb2Nlc3MuIFdoZW4gcGVvcGxlIGFzayBtZSB3aGF0IEkgZG8sIEkgdGVsbCB0aGVtIHRoYXQgSSBkZWFsIGluIGlkZWFzIGJ1dCBtb3JlIHNwZWNpZmljYWxseSBpZGVhcyB0aGF0IHB1c2ggdGhlIGJvdW5kYXJpZXMgb2YgaW5ub3ZhdGlvbi4gTW9zdCBvZiB0aGVzZSBpZGVhcywgSSBkaXNjYXJkIGJ1dCB0aGUgb25lcyB0aGF0IGludm9sdmUgdXRpbGl6aW5nIHRlY2hub2xvZ3ksIEkgcHVyc3VlLiBJIGhvcGUgdG8gaGF2ZSBhIGZ1dHVyZSBpbiBmcm9udC1lbmQgc29mdHdhcmUgZGV2ZWxvcG1lbnQgYW5kIG9uZSBkYXkgYnVpbGQgc29tZXRoaW5nIG9mIG15IG93bi4gVGhhbmsgeW91IGZvciB2aXNpdGluZyA6KVxcbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gd29yaygpIHtcbiAgICAgICAgICAgIHZhciB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICB1bC5jbGFzcyA9ICd3b3JrLWxpc3QnO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlTGkoJzxhIGhyZWY9XCJodHRwOi8vaW5jbGluZS5henVyZXdlYnNpdGVzLm5ldC9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5JbmNsaW5lIEZpdG5lc3M8L2E+JykpO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlTGkoJzxhIGhyZWY9XCJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZmlsZS9kLzBCeGZHMlU1NXFmN1hNWEJmUkZwaVFsUndlVWsvdmlldz91c3A9c2hhcmluZ1wiIHRhcmdldD1cIl9ibGFua1wiPkluY2xpbmUgRml0bmVzcyBCcmFuZGluZyBHdWlkZTwvYT4nKSk7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVMaSgnPGEgaHJlZj1cImh0dHA6Ly9oZWxpb3NpbnNpZ2h0cy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+SGVsaW9zIElQTTwvYT4nKSk7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVMaSgnPGEgaHJlZj1cImh0dHBzOi8vd3d3LmlwZG9ja2V0aW5ncnVsZXMuY29tL2luZGV4LnBocD90aXRsZT1NYWluX1BhZ2VcIiB0YXJnZXQ9XCJfYmxhbmtcIj5JUCBEb2NrZXRpbmcgUnVsZXM8L2E+JykpO1xuXG4gICAgICAgICAgICAvLyB0ZXJtaW5hbC5hcHBlbmQoJ1xcbicpO1xuICAgICAgICAgICAgdGVybWluYWwuYXBwZW5kKHVsKTtcbiAgICAgICAgICAgIC8vIHRlcm1pbmFsLmFwcGVuZCgnXFxuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjb250YWN0KCkge1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVkaXQoKSB7XG4gICAgICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgdWwuY2xhc3MgPSAnY3JlZGl0LWxpc3QnO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlTGkoJzxhIGhyZWY9XCJodHRwczovL2NvZGVwZW4uaW8vbWFyY2JpemFsL3Blbi9WTEtvYW0/cT10ZXJtaW5hbCZsaW1pdD1hbGwmdHlwZT10eXBlLXBlbnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5UZXJtaW5hbCBGdW5jdGlvbmFsaXR5IGJ5OiBNYXJjdXMgQml6YWw8L2E+JykpO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlTGkoJzxhIGhyZWY9XCJodHRwOi8vaW50ZXJhY3Rqcy5pby9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5XaW5kb3cgRHJhZyAmIFJlc2l6ZSBCZWhhdmlvciBmcm9tOiBJbnRlcmFjdC5qczwvYT4nKSk7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVMaSgnPGEgaHJlZj1cImh0dHA6Ly93d3cubWF0dGJvbGR0LmNvbS9kZW1vcy90eXBlZC1qcy9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5UeXBpbmcgZWZmZWN0IGZyb206IFR5cGVkLmpzPC9hPicpKTtcbiAgICAgICAgICAgIC8vIHRlcm1pbmFsLmFwcGVuZCgnXFxuJyk7XG4gICAgICAgICAgICB0ZXJtaW5hbC5hcHBlbmQodWwpO1xuICAgICAgICAgICAgLy8gdGVybWluYWwuYXBwZW5kKCdcXG4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXJtaW5hbCA9ICQoXCIudGVybWluYWxcIik7XG4gICAgICAgIHZhciBwcm9tcHQgPSBcImpha2VzLXBvcnRmb2xpbzpcIjtcbiAgICAgICAgdmFyIHBhdGggPSBcIn5cIjtcblxuICAgICAgICB2YXIgY29tbWFuZEhpc3RvcnkgPSBbXTtcbiAgICAgICAgdmFyIGhpc3RvcnlJbmRleCA9IDA7XG5cbiAgICAgICAgdmFyIGNvbW1hbmQgPSBcIlwiO1xuICAgICAgICB2YXIgY29tbWFuZHMgPSBbe1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiaGVscFwiLFxuICAgICAgICAgICAgXCJmdW5jdGlvblwiOiBoZWxwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcImNsZWFyXCIsXG4gICAgICAgICAgICBcImZ1bmN0aW9uXCI6IGNsZWFyXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcImFib3V0LW1lXCIsXG4gICAgICAgICAgICBcImZ1bmN0aW9uXCI6IGFib3V0XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIm15LXdvcmtcIixcbiAgICAgICAgICAgIFwiZnVuY3Rpb25cIjogd29ya1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJjb250YWN0LW1lXCIsXG4gICAgICAgICAgICBcImZ1bmN0aW9uXCI6IGNvbnRhY3RcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiY3JlZGl0XCIsXG4gICAgICAgICAgICBcImZ1bmN0aW9uXCI6IGNyZWRpdFxuICAgICAgICB9XTtcblxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzQ29tbWFuZCgpIHtcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhcmdzIGxpc3QgYnkgc3BsaXR0aW5nIHRoZSBjb21tYW5kXG4gICAgICAgICAgICAvLyBieSBzcGFjZSBjaGFyYWN0ZXJzIGFuZCB0aGVuIHNoaWZ0IG9mZiB0aGVcbiAgICAgICAgICAgIC8vIGFjdHVhbCBjb21tYW5kLlxuXG4gICAgICAgICAgICB2YXIgYXJncyA9IGNvbW1hbmQuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgdmFyIGNtZCA9IGFyZ3NbMF07XG4gICAgICAgICAgICBhcmdzLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgYXZhaWxhYmxlIGNvbW1hbmRzIHRvIGZpbmQgYSBtYXRjaC5cbiAgICAgICAgICAgIC8vIFRoZW4gY2FsbCB0aGF0IGNvbW1hbmQgYW5kIHBhc3MgaW4gYW55IGFyZ3VtZW50cy5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tbWFuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY21kID09PSBjb21tYW5kc1tpXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzW2ldLmZ1bmN0aW9uKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBObyBtYXRjaCB3YXMgZm91bmQuLi5cbiAgICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIHRlcm1pbmFsLmFwcGVuZChcInVzZXI6IGNvbW1hbmQgbm90IGZvdW5kOiBcIiArIGNvbW1hbmQgKyBcIlxcblwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIHRvIGNvbW1hbmQgaGlzdG9yeSBhbmQgY2xlYW4gdXAuXG4gICAgICAgICAgICBjb21tYW5kSGlzdG9yeS5wdXNoKGNvbW1hbmQpO1xuICAgICAgICAgICAgaGlzdG9yeUluZGV4ID0gY29tbWFuZEhpc3RvcnkubGVuZ3RoO1xuICAgICAgICAgICAgY29tbWFuZCA9IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkaXNwbGF5UHJvbXB0KCkge1xuICAgICAgICAgICAgdGVybWluYWwuYXBwZW5kKFwiPHNwYW4gY2xhc3M9XFxcInByb21wdFxcXCI+XCIgKyBwcm9tcHQgKyBcIjwvc3Bhbj4gXCIpO1xuICAgICAgICAgICAgdGVybWluYWwuYXBwZW5kKFwiPHNwYW4gY2xhc3M9XFxcInBhdGhcXFwiPlwiICsgcGF0aCArIFwiPC9zcGFuPiBcIik7XG4gICAgICAgIH1cblxuLy8gRGVsZXRlIG4gbnVtYmVyIG9mIGNoYXJhY3RlcnMgZnJvbSB0aGUgZW5kIG9mIG91ciBvdXRwdXRcbiAgICAgICAgZnVuY3Rpb24gZXJhc2Uobikge1xuICAgICAgICAgICAgY29tbWFuZCA9IGNvbW1hbmQuc2xpY2UoMCwgLW4pO1xuICAgICAgICAgICAgdGVybWluYWwuaHRtbCh0ZXJtaW5hbC5odG1sKCkuc2xpY2UoMCwgLW4pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyQ29tbWFuZCgpIHtcbiAgICAgICAgICAgIGlmIChjb21tYW5kLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBlcmFzZShjb21tYW5kLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhcHBlbmRDb21tYW5kKHN0cikge1xuICAgICAgICAgICAgdGVybWluYWwuYXBwZW5kKHN0cik7XG4gICAgICAgICAgICBjb21tYW5kICs9IHN0cjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAgICAvL1x0S2V5cHJlc3MgZG9lc24ndCBjYXRjaCBzcGVjaWFsIGtleXMsXG4gICAgICAgICAgICAvL1x0c28gd2UgY2F0Y2ggdGhlIGJhY2tzcGFjZSBoZXJlIGFuZFxuICAgICAgICAgICAgLy9cdHByZXZlbnQgaXQgZnJvbSBuYXZpZ2F0aW5nIHRvIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgLy9cdHBhZ2UuIFdlIGFsc28gaGFuZGxlIGFycm93IGtleXMgZm9yIGNvbW1hbmQgaGlzdG9yeS5cbiAgICAgICAgKi9cblxuICAgICAgICAkKGRvY3VtZW50KS5rZXlkb3duKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgICAgIHZhciBrZXlDb2RlID0gdHlwZW9mIGUud2hpY2ggPT09IFwibnVtYmVyXCIgPyBlLndoaWNoIDogZS5rZXlDb2RlO1xuXG4gICAgICAgICAgICAvLyBCQUNLU1BBQ0VcbiAgICAgICAgICAgIGlmIChrZXlDb2RlID09PSA4ICYmIGUudGFyZ2V0LnRhZ05hbWUgIT09IFwiSU5QVVRcIiAmJiBlLnRhcmdldC50YWdOYW1lICE9PSBcIlRFWFRBUkVBXCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJhc2UoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVUCBvciBET1dOXG4gICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gMzggfHwga2V5Q29kZSA9PT0gNDApIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHVwIG9yIGRvd24gdGhlIGhpc3RvcnlcbiAgICAgICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gMzgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVVBcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUluZGV4LS07XG4gICAgICAgICAgICAgICAgICAgIGlmIChoaXN0b3J5SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRE9XTlxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhpc3RvcnlJbmRleCA+IGNvbW1hbmRIaXN0b3J5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlJbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gR2V0IGNvbW1hbmRcbiAgICAgICAgICAgICAgICB2YXIgY21kID0gY29tbWFuZEhpc3RvcnlbaGlzdG9yeUluZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoY21kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb21tYW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZENvbW1hbmQoY21kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBnZXQgdGhlIHJpZ2h0IGV2ZW50XG4gICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICB2YXIga2V5Q29kZSA9IHR5cGVvZiBlLndoaWNoID09PSBcIm51bWJlclwiID8gZS53aGljaCA6IGUua2V5Q29kZTtcblxuICAgICAgICAgICAgLy8gV2hpY2gga2V5IHdhcyBwcmVzc2VkP1xuICAgICAgICAgICAgc3dpdGNoIChrZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gRU5URVJcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGVybWluYWwuYXBwZW5kKFwiXFxuXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb21tYW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlQcm9tcHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRDb21tYW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5Q29kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbi8vIFNldCB0aGUgd2luZG93IHRpdGxlXG4vLyAgICAgICAgIHRpdGxlLnRleHQoXCIxLiBqYWtlLXNjaHJvZWRlci1wb3J0Zm9saW86IH4gKHVzZXIpIFwiKTtcblxuLy8gR2V0IHRoZSBkYXRlIGZvciBvdXIgZmFrZSBsYXN0LWxvZ2luXG4vLyAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKS50b1N0cmluZygpOyBkYXRlID0gZGF0ZS5zdWJzdHIoMCwgZGF0ZS5pbmRleE9mKFwiR01UXCIpIC0gMSk7XG5cbi8vIERpc3BsYXkgbGFzdC1sb2dpbiBhbmQgcHJvbXRcbi8vICAgICAgICAgdGVybWluYWwuYXBwZW5kKFwiTGFzdCBsb2dpbjogXCIgKyBkYXRlICsgXCIgb24gdHR5czAwMFxcblwiKTsgZGlzcGxheVByb21wdCgpO1xuICAgICAgICBkaXNwbGF5UHJvbXB0KCk7XG5cbiAgICB9XG5cbiAgICBpbnRlcmFjdCgnLndpbmRvdycpXG4gICAgICAgIC5kcmFnZ2FibGUoe1xuICAgICAgICAgICAgb25tb3ZlOiBkcmFnTW92ZUxpc3RlbmVyLFxuICAgICAgICAgICAgYWxsb3dGcm9tOiAnLmhlYWRpbmcnLFxuICAgICAgICB9KVxuICAgICAgICAucmVzaXphYmxlKHtcbiAgICAgICAgICAgIGVkZ2VzOiB7IHJpZ2h0OiB0cnVlLCBib3R0b206IHRydWUsIGxlZnQ6IHRydWUsIHRvcDogdHJ1ZSB9LFxuICAgICAgICAgICAgbWFyZ2luOiAxMFxuICAgICAgICB9KVxuICAgICAgICAub24oJ3Jlc2l6ZW1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgeCA9IChwYXJzZUZsb2F0KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpKSB8fCAwKSxcbiAgICAgICAgICAgICAgICB5ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15JykpIHx8IDApO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGVsZW1lbnQncyBzdHlsZVxuXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLndpZHRoICA9IGV2ZW50LnJlY3Qud2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSBldmVudC5yZWN0LmhlaWdodCArICdweCc7XG5cblxuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRsZScpO1xuICAgICAgICAgICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gJzEuIGpha2Utc2Nocm9lZGVyLXBvcnRmb2xpbzogfiAodXNlcikgJyArICBNYXRoLnJvdW5kKGV2ZW50LnJlY3Qud2lkdGgpICsgJ8OXJyArIE1hdGgucm91bmQoZXZlbnQucmVjdC5oZWlnaHQpO1xuXG5cbiAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSB3aGVuIHJlc2l6aW5nIGZyb20gdG9wIG9yIGxlZnQgZWRnZXNcbiAgICAgICAgICAgIHggKz0gZXZlbnQuZGVsdGFSZWN0LmxlZnQ7XG4gICAgICAgICAgICB5ICs9IGV2ZW50LmRlbHRhUmVjdC50b3A7XG5cbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID1cbiAgICAgICAgICAgICAgICAndHJhbnNsYXRlKCcgKyB4ICsgJ3B4LCcgKyB5ICsgJ3B4KSc7XG5cbiAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHgpO1xuICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS15JywgeSk7XG5cblxuICAgICAgICAgICAgLy8gdGFyZ2V0LnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChldmVudC5yZWN0LndpZHRoKSArICfDlycgKyBNYXRoLnJvdW5kKGV2ZW50LnJlY3QuaGVpZ2h0KTtcbiAgICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBkcmFnTW92ZUxpc3RlbmVyIChldmVudCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgLy8ga2VlcCB0aGUgZHJhZ2dlZCBwb3NpdGlvbiBpbiB0aGUgZGF0YS14L2RhdGEteSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICB4ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14JykpIHx8IDApICsgZXZlbnQuZHgsXG4gICAgICAgICAgICB5ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15JykpIHx8IDApICsgZXZlbnQuZHk7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIHRoZSBlbGVtZW50XG4gICAgICAgIHRhcmdldC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPVxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9XG4gICAgICAgICAgICAgICAgJ3RyYW5zbGF0ZSgnICsgeCArICdweCwgJyArIHkgKyAncHgpJztcblxuICAgICAgICAvLyB1cGRhdGUgdGhlIHBvc2lpb24gYXR0cmlidXRlc1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXgnLCB4KTtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS15JywgeSk7XG4gICAgfVxuXG5cbiAgICAvLyB2YXIgdHlwZWQ2ID0gbmV3IFR5cGVkKCcudGVybWluYWwnLCB7XG4gICAgLy8gICAgIHN0cmluZ3M6IFtcbiAgICAvLyAgICAgICAgIFwiSGkgdGhlcmUsIG15IG5hbWUgaXMgSmFrZV4xMDAwXFxuXCIsXG4gICAgLy8gICAgICAgICBcInRoaXMgaXMgbXkgcG9ydGZvbGlvIHdlYnNpdGUxNTAwMFxcblwiLFxuICAgIC8vICAgICAgICAgXCJUeXBlIFxcXCJIZWxwXFxcIiB0byBzZWUgYSBsaXN0IG9mIGNvbW1hbmRzXCJcbiAgICAvLyAgICAgXSxcbiAgICAvLyAgICAgdHlwZVNwZWVkOiAzMCxcbiAgICAvLyAgICAgYmFja1NwZWVkOiAwLFxuICAgIC8vICAgICBsb29wOiBmYWxzZSxcbiAgICAvLyAgICAgc2hvd0N1cnNvcjogZmFsc2UsXG4gICAgLy8gICAgIGNvbnRlbnRUeXBlOiBudWxsLFxuICAgIC8vICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgICAgICB0eXBlZDYuZGVzdHJveSgpO1xuICAgIC8vICAgICAgICAgYmVnaW5UZXJtaW5hbCgpO1xuICAgIC8vXG4gICAgLy8gICAgIH1cbiAgICAvLyB9KTtcblxuICAgIHZhciB0eXBlMSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHR5cGVkMSA9IG5ldyBUeXBlZCgnLmVsZW1lbnQwLXRleHQnLCB7XG4gICAgICAgICAgICBzdHJpbmdzOiBbXCIgSGkgdGhlcmUsIG15IG5hbWUgaXMgSmFrZVwiXSxcbiAgICAgICAgICAgIHR5cGVTcGVlZDogMzAsXG4gICAgICAgICAgICBiYWNrU3BlZWQ6IDAsXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dDdXJzb3I6IGZhbHNlLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gKCkge1xuXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgMCk7XG4gICAgdmFyIHR5cGUyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAkKCcuZWxlbWVudDEnKS5jc3MoJ2Rpc3BsYXknLCdpbmhlcml0Jyk7XG4gICAgICAgIHZhciB0eXBlZDIgPSBuZXcgVHlwZWQoJy5lbGVtZW50MS10ZXh0Jywge1xuICAgICAgICAgICAgc3RyaW5nczogW1wiIFRoaXMgaXMgbXkgcG9ydGZvbGlvIHdlYnNpdGUsIEkgaG9wZSB5b3UgZW5qb3kgOilcIl0sXG4gICAgICAgICAgICB0eXBlU3BlZWQ6IDMwLFxuICAgICAgICAgICAgYmFja1NwZWVkOiAwLFxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXG4gICAgICAgICAgICBzaG93Q3Vyc29yOiBmYWxzZSxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIDMwMDApO1xuICAgIHZhciB0eXBlMyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnLmVsZW1lbnQyJykuY3NzKCdkaXNwbGF5JywnaW5oZXJpdCcpO1xuICAgICAgICB2YXIgdHlwZWQzID0gbmV3IFR5cGVkKCcuZWxlbWVudDItdGV4dCcsIHtcbiAgICAgICAgICAgIHN0cmluZ3M6IFtcIiBQbGVhc2UgdHlwZSBcXFwiSGVscFxcXCIgdG8gc2VlIGEgbGlzdCBvZiBjb21tYW5kc14zMDAwXCJdLFxuICAgICAgICAgICAgdHlwZVNwZWVkOiAzMCxcbiAgICAgICAgICAgIGJhY2tTcGVlZDogMCxcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd0N1cnNvcjogZmFsc2UsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gJCgnLnRlcm1pbmFsJykuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBiZWdpblRlcm1pbmFsKCk7XG4gICAgICAgICAgICAgICAgJCgnLnRlcm1pbmFsJykuYWRkQ2xhc3MoJ3Rlcm1pbmFsLWFmdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIDcwMDApO1xuXG5cblxuXG5cblxufSk7XG5cbiJdfQ==
